<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RiderSkill — Live, Chat & Dernière VOD</title>
  <meta name="description" content="Le hub officiel de RiderSkill : live Twitch, chat sombre lisible, dernière VOD auto, liens et contact pro.">
  <meta name="theme-color" content="#121219">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0e0e12; --bg2:#12121a; --text:#e8e9ee; --muted:#9aa0aa;
      --violet:#9146FF; --brand:#00F5D4; --radius:18px; --shadow:0 12px 30px rgba(0,0,0,.35);
      --maxw:1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      color:var(--text); background:
        radial-gradient(1200px 600px at 10% -10%, rgba(145,70,255,.12), transparent 60%),
        radial-gradient(1200px 600px at 110% 10%, rgba(0,245,212,.08), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:20px}
    header{
      position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(6px);
      background:linear-gradient(180deg, rgba(18,18,26,.9), rgba(18,18,26,.5));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .nav{display:flex; align-items:center; gap:16px; padding:14px 0;}
    .brand{
      display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.5px;
      background:linear-gradient(90deg, var(--brand), #6ee7ff 40%, var(--violet));
      -webkit-background-clip:text; background-clip:text; color:transparent; font-size:22px;
    }
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      background:#1c1c28; color:#cfd2dc; font-size:13px; border:1px solid rgba(255,255,255,.06)}
    .pill .dot{width:8px; height:8px; border-radius:50%; background:#6b6f7a}
    .live .dot{background:#ff3b3b; box-shadow:0 0 0 6px rgba(255,59,59,.15)}
    main{padding:26px 0 60px}
    .grid{display:grid; gap:18px; grid-template-columns: 1fr;}
    @media (min-width: 1024px){ .grid{grid-template-columns: 2fr 1fr;} }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden;
    }
    .card h2{margin:0; padding:16px 18px; font-size:18px; border-bottom:1px solid rgba(255,255,255,.06)}
    .card .body{padding:16px}

    .row{display:flex; gap:10px; flex-wrap:wrap}
    .btn{appearance:none;border:1px solid rgba(255,255,255,.12);background:#1b1b25;color:#e9ecf6;
      padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600;font-size:14px}
    .btn:hover{filter:brightness(1.08)}
    .muted{color:var(--muted)}

    /* Player 16/9 */
    .embed{
      position:relative; width:100%; aspect-ratio:16/9; background:#0b0b12; border-bottom:1px solid rgba(255,255,255,.06);
    }
    .embed iframe{position:absolute; inset:0; width:100%; height:100%; border:0; border-radius:calc(var(--radius) - 2px);}

    /* Chat sombre : grande hauteur */
    .chatEmbed{
      position:relative; width:100%; height:720px; background:#0b0b12; border-bottom:1px solid rgba(255,255,255,.06);
    }
    .chatEmbed iframe{position:absolute; inset:0; width:100%; height:100%; border:0; border-radius:calc(var(--radius) - 2px)}
    @media (max-width:1023px){ .chatEmbed{height:520px;} }

    /* VOD */
    .vodWrap{display:flex; flex-direction:column; gap:10px}
    .vodPlayer{position:relative; width:100%; aspect-ratio:16/9; background:#0b0b12; border:1px solid rgba(255,255,255,.06); border-radius:14px; overflow:hidden}
    .vodPlayer iframe{position:absolute; inset:0; width:100%; height:100%; border:0}
    .vodTitle{font-weight:600}
    .vodMeta{font-size:13px; color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand" aria-label="RIDERSKILL">RIDERSKILL</div>
      <div id="livePill" class="pill" title="Statut live" style="margin-left:auto">
        <span class="dot"></span><span id="liveText">Statut inconnu</span>
      </div>
      <div class="row" style="margin-left:10px">
        <a class="btn" href="https://www.twitch.tv/riderskill" target="_blank" rel="noopener">Twitch</a>
        <a class="btn" href="https://kick.com/riderskill" target="_blank" rel="noopener">Kick</a>
        <a class="btn" href="https://www.youtube.com/@RiderSkill" target="_blank" rel="noopener">YouTube</a>
        <!-- ✅ Nouveau bouton "riderskill.fr" -->
        <a class="btn" href="https://riderskill.github.io/riderskill-site/" target="_blank" rel="noopener">riderskill.fr</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="grid">
      <!-- PLAYER -->
      <article class="card">
        <h2>Live Twitch</h2>
        <div class="embed" id="playerWrap" aria-label="Lecteur Twitch">
          <iframe
            id="twitchPlayer"
            title="Lecteur Twitch RiderSkill"
            allow="autoplay; fullscreen; picture-in-picture"
            loading="lazy"
            src="https://player.twitch.tv/?channel=riderskill&parent=riderskill.github.io&muted=true&autoplay=true">
          </iframe>
        </div>
        <div class="body">
          <div class="row">
            <a class="btn" href="https://www.twitch.tv/riderskill/clips?filter=clips&range=all" target="_blank" rel="noopener">Clips</a>
            <a class="btn" href="https://www.twitch.tv/riderskill/schedule" target="_blank" rel="noopener">Planning</a>
            <a class="btn" href="https://x.com/search?q=RiderSkill" target="_blank" rel="noopener">X / Twitter</a>
          </div>

          <!-- ===== Dernière VOD ===== -->
          <div class="vodWrap" style="margin-top:16px">
            <div class="vodTitle" id="vodTitle">Dernière VOD</div>
            <div class="vodMeta" id="vodMeta">Chargement…</div>
            <div class="vodPlayer">
              <iframe id="vodPlayer"
                title="Dernière VOD RiderSkill"
                allow="autoplay; fullscreen; picture-in-picture"
                loading="lazy"
                src="">
              </iframe>
            </div>
            <div class="row">
              <a id="vodLink" class="btn" href="https://www.twitch.tv/riderskill/videos?filter=archives&sort=time" target="_blank" rel="noopener">Voir sur Twitch</a>
              <span class="muted">La VOD se met à jour automatiquement.</span>
            </div>
          </div>
        </div>
      </article>

      <!-- CHAT sombre grand -->
      <aside class="card">
        <h2>Chat Twitch</h2>
        <div class="chatEmbed" aria-label="Chat Twitch sombre">
          <iframe
            title="Chat Twitch RiderSkill"
            loading="lazy"
            src="https://www.twitch.tv/embed/riderskill/chat?parent=riderskill.github.io&theme=dark"
            allow="fullscreen">
          </iframe>
        </div>
        <div class="body">
          <div class="row">
            <a class="btn" href="https://www.twitch.tv/popout/riderskill/chat?popout=" target="_blank" rel="noopener">Pop-out sombre</a>
            <span class="muted">Si ça boucle sur la connexion : connecte-toi sur twitch.tv et autorise les cookies tiers.</span>
          </div>
        </div>
      </aside>

      <!-- À PROPOS -->
      <article class="card" style="grid-column:1 / -1">
        <h2>À propos</h2>
        <div class="body">
          <p>Je suis dispo sur mes réseaux sociaux.</p>
          <p><b>E-mail pro :</b> <a href="mailto:riderskill.pro@outlook.fr">riderskill.pro@outlook.fr</a></p>
          <p>Animateur WebTV – Créateur de contenu en direct.</p>
        </div>
      </article>
    </section>
  </main>

  <footer>
    <div class="wrap" style="opacity:.75; font-size:13px; text-align:center">© <span id="y"></span> RiderSkill — Tous droits réservés.</div>
  </footer>

  <script>
    const $ = (s, d=document)=>d.querySelector(s);
    $('#y').textContent = new Date().getFullYear();

    // Indicateur live
    const player = $('#twitchPlayer');
    const pill = $('#livePill'); const txt = $('#liveText');
    let loaded = false;
    player?.addEventListener('load', ()=>{ loaded=true; pill.classList.add('live'); txt.textContent='En direct'; });
    setTimeout(()=>{ if(!loaded) txt.textContent='Hors ligne ?'; },6000);

    // Charger la dernière VOD depuis vod.json
    async function loadVOD(){
      try{
        const res = await fetch('vod.json', { cache: 'no-store' });
        if(!res.ok) throw new Error('vod.json introuvable');
        const v = await res.json();
        $('#vodTitle').textContent = v.title || 'Dernière VOD';
        const d = v.published_at ? new Date(v.published_at) : null;
        const dateTxt = d ? d.toLocaleString('fr-FR', { dateStyle:'medium', timeStyle:'short' }) : '';
        const durTxt = v.duration ? ` • ${v.duration}` : '';
        $('#vodMeta').textContent = (dateTxt || durTxt) ? (dateTxt + durTxt) : '—';
        const iframe = $('#vodPlayer');
        if (v.id) {
          iframe.src = `https://player.twitch.tv/?video=${encodeURIComponent(v.id)}&parent=riderskill.github.io&autoplay=false&muted=false`;
        } else if (v.url) {
          const vid = v.url.split('/').pop();
          iframe.src = `https://player.twitch.tv/?video=${encodeURIComponent(vid)}&parent=riderskill.github.io&autoplay=false&muted=false`;
        } else {
          $('#vodMeta').textContent = 'Aucune VOD trouvée.';
        }
        if (v.url) $('#vodLink').href = v.url;
      }catch(e){
        console.error(e);
        $('#vodMeta').textContent = 'Impossible de charger la VOD.';
      }
    }
    loadVOD();
  </script>
</body>
</html>
